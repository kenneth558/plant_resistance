**Current Operational Status:** As of 26 Apr 2019, I had not gotten any PCB rendition of this circuit working, only breadboarded, and I've decided to incorporate additional circuitry onto the board anyway that will enhance sensitivity to a more reasonable capability.  The board space that the additional circuitry uses forces me to use SMD much more, thus requiring extensive layout redesign.  Though I personally have not gotten the circuit working with the PCB design I publish here, I do believe someone with adequate electronics skills will be able to gain a great deal of headway with it. (I am talking about Rev 3).  I submitted and order for v.5 PCB.  I'm skipping v.4 due to one last design enhancement being added just before ordering that PCB.  After submitting v.5 PCB design to the fabricator, I looked again into redesigning the front end and decided upon quite a different and better front end.  Therefore I will be working on that new design as the goal for the month (20 May 2019).

As of 15 January 2019, [this sketch](https://github.com/kenneth558/plant_resistance_primary_perception/blob/Free/sketch%20code/adc_for_plant_tissue.ino) can be made with appropriate macro defines **fully operational in the described circuit configuration** sans wifi and SD card storage.  One single challenge remains to me: configuring the electrodes so as to acquire high enough conductivity for the LM334 circuit to work.

------------------------------------

The specific circuit configuration you'll need with this current sketch version can be described as follows.  The description is to some extent covert because this stage of development requires you to be or become conversant/knowledgeable about things electronic and Arduino, anyway.  Vendors I use to purchase these are shown in [this page](https://github.com/kenneth558/plant_resistance_primary_perception/blob/Free/More%20construction%20details.md) near the end of it.  

[KiCad schematic here](https://github.com/kenneth558/plant_resistance_primary_perception/blob/Free/schematic.pdf). 


**Two MCP4162-502** with some way to connect into the circuit.  The sketch code refers to these as LSB.

**Two MCP4162-104** with some way to connect into the circuit.  The sketch code refers to these as MSB.

I'm currently developing for MCP4262 devices (dual dPots).  So far they aren't working for me, or the professionally printed circuit board is the problem.  Am troubleshooting...

**Two LM334** ICs with some way to connect into the circuit - each need their + pins connected to Arduino 5v power.  Each also needs one MCP4162-503 digipot resistor and half the amount of MCP4162-104 digipot resistors connected in series between their current programming pins and their - pins.  Connect each digipot CS pin to the appropriate Arduino Digital pin based on comments in the sketch code.  *Alternate to using LM334s: Several more digipots each leg and one or more 74LV138 to drive the digipot CS lines.  See sketch and schematic notes for details*

**One minimal-wattage resistor** of similar resistance as the plant tissue with some way to connect into the circuit.  A resistance value of 1.5 Mohm works.  The place this gets connected into the circuit is the reference leg of the Wheatstone bridge as the leg load resistance.  Note that the other Wheatstone bridge leg, the one used to balance the reference leg, is called the signal leg, and its load resistance is the plant tissue under test, AKA Device Under Test (DUT).

**One AD8244** with the soldering where-with-all (including soldering skills) to match.  These tiny parts, hyperbolically speaking, are microscopic in size, since they were evidently never intended for use by the hobbyist market.  Solder to the MSOP-10 PCB ADAPTER BOARD listed next or maybe you know of an inexpensive socket you can use instead.  I wish I knew of such a socket, but I don't.

**One MSOP-10 PCB ADAPTER BOARD** with some way to connect into the circuit.

**One HX711** with some way to connect into the circuit.  In my early development work, I got the ADS1015 and ADS1115 working, but have not kept that functionality maintained.  Hopefully it still works.  I advise a unique connection into the ADS1x15 circuit ground as I describe on the page entitled "[More construction details.md](https://github.com/kenneth558/plant_resistance_primary_perception/blob/Free/More%20construction%20details.md)".

**Power supply decoupling (low ESR) capacitors as needed** with some way to connect into the circuit.  At least .1uF in capacitance.  The digipots may need .5uF-2.0uF or more in totality just for the digipots.

**Arduino board with power/serial communications cable**.  I am doing my latest development work on a Leonardo, but my earlier work was done on the Uno.  I have written my code to accommodate the TTGO XI, but have never tried the sketch with it.

**Two of whatever electrode style you prefer**, with some way to connect their wire end electrically into the coax cable and some way to insert their graphite end FULLY into the electrolyte pouches.  You may want to consider that Cleve Backster just used "leaves" of  medical laboratory grade stainless steel with salt-impregnated agar for the electrolyte contact.  ECG pads can be made yourself: https://www.instructables.com/id/How-to-make-ECG-pads-conductive-gel/.

*ON THE CHEAP: My current electrode method is totally dry and consists of powdered graphite impregnated fabric - the leaf side of the fabric is gently pressed against the leaf broadside, a small powdered graphite area forms a conductor from the leaf surface -> through the fabric to -> a metallic screen pressing against the back side of the fabric.  Thorough continuity of the graphite must be ensured through the fabric; so to ensure that, I'll press and smear the powder into the desired spot on the fabric from both sides of the fabric, not just one side.  Too large of a spot will cause signal failure due to electrical shorting around the leaf when arranged against the leaf.  Signal failure is recoverable from when the short is removed.  Graphite powder may be purchased in the department where automotive door lock lubricant is sold.*

*I use a piece of man-made sponge or squishy foam to apply the pressure, and a long paint stick entering from a side, top or bottom applying the pressure to the back of the sponge.  I've sewn the fabric into the shape of a sock/mitten to enclose each assembly.  The metal screen should be the limpest you can find (gentle against the leaf) and will extend across the graphite spot to somewhere where the wires fasten to it with solid, noise-free contact.  Unhelpful electrical noise is created when metals, especially dissimilar ones like copper wires versus non-copper screen, rub against each other in circuit rather than being in immoveable contact.  I have found limp, stainless steel screen fashioned, conveniently for me, into its own socks as a laundry washing-machine emptying hose filter.  Cost at Menard's: $1.38 for a 2-pack that were sized very well for the paint sticks (Menard's again, free from right over there in the paint department) and dish-washing sponges ($2.00 for a 2-pack from Walgreens) that come with one handle that works less well than the two free paint sticks.  The paint sticks fit right into the back of the sponges, but it will be the fabric and screen socks that do the holding of the sponge to the stick.  Neatly remove the rough-scrubber side of the sponge to leave a smooth, flat side.*

*A perfect circular shape (for purpose of appearance) of the graphite spot can near enough be achieved by using some small, empty vitamin bottle (that simply means "dry and clean except for maybe other stray electrolytes") and screw-down lid that you place a tiny bit of graphite powder into the container, place the correct locale of fabric between lid and bottle, and screw down the lid just barely tight enough to prevent graphite powder from leaking while you shake the bottle's contents down - not up - onto the fabric for a short while.  That will take care of graphiting only one side of the spots.  The other side of the spots needs to get smeared, too, don't forget.*

Make two of these electrode assemblies because each of the two sides of the leaf gets an electrode applied. 

There a numerous advantages to using a dry method of leaf contact, including better maintaining the long-term function and health of the stomata, thus the leaf as a whole, in my guesstimation.  Nonetheless, conductive gel for the TENS machine should work as well.  Search for "Conductive Gel TENS ECG [salt-free]".

**length of insulated coaxial cable** with some way to connect into the circuit.  This connects the plant tissue via electrodes into the circuit's Wheatstone bridge signal leg as the load/DUT (Device Under Test).  The shield of the coax connects to circuit ground, the center conductor connects to the - lead of the LM334 on the signal side of the Wheatstone bridge.

**optional 4-way light switch** if you want to experiment with polarity.  With some way to mount at the plant end of the coax as close to the electrodes as practical, connect, and insulate.  If such a 4-way switch is used, there is no reason to make the remainder of the wiring to the electrodes to be coaxial.  Just use twisted pair for it.  Attach to the 4-way thusly: the two coax ends to the screw terminals at one END of the switch (END, NOT SIDE!) and the twisted pair ends to the screw terminals at the other END (END, NOT SIDE) of the 4-way.  If this will help clarify what I'm calling and end vs. what I'm calling a side, I'll go further to say that the captive screws used to mount the switch into an electrical box will be located one at each END of the switch, NOT each side of the switch.

**insulated electrodes support (clamp/holder/stand/arm/goose neck/...)** with some means of fastening it between electrodes and floor/table/soil while applying a clamping force on the electrodes against opposing surfaces of the leaf or other plant part[s].  Please ensure that no part of this assembly that may possibly contact the plant is electrically conductive because interfering electrical path fluctuations will result from any such electrical contact.  I suggest an electrode pressing up against the abaxial (underside) surface be afixed while the upper electrode is controlled against the adaxial surface.

**computer** placed near enough to provide Arduino connection and show the Arduino IDE Serial Plotter rendered on the monitor for the user to observe.

---------------------
The changes I am still developing are merely changes to #1) allow more flexibility in the circuit and #2) speed up resistance range changes during use.  Circuitry flexibility hopes are to allow both fewer and more digital potentiometers per bridge leg, to allow bridge legs to be made without LM334s, to allow non-LM334 legs to be unbridged, to accommodate outboard ADCs of types beyond the HX711, and to allow for use of more than just one outboard ADC.
